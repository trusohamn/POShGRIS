(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,a){e.exports=a(36)},28:function(e,t,a){},36:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(12),l=a.n(c),o=a(2),u=a(7),i=(a(28),a(4)),s=r.a.createContext({}),d=function(e,t){fetch("http://localhost:8000"+e,{method:"GET",credentials:"include"}).then(function(e){return e.json()}).then(function(e){return t(null,e)}).catch(function(e){return console.log(e)})};var m=function(e){var t=Object(n.useState)(null),a=Object(i.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(null),u=Object(i.a)(o,2),m=u[0],p=u[1],f=Object(n.useState)([]),b=Object(i.a)(f,2),h=b[0],E=b[1],v=Object(n.useState)([]),g=Object(i.a)(v,2),y=g[0],k=g[1],N=Object(n.useState)(1),O=Object(i.a)(N,2),j=O[0],_=O[1],P=Object(n.useState)(null),x=Object(i.a)(P,2),w=x[0],C=x[1],S={getProducts:function(){d("/api/products",function(e,t){return l(t)})},products:c,getTickets:function(){d("/api/tickets",function(e,t){return p(t)})},tickets:m,productsInTicket:h,setProductInTicket:E,tablesCoords:y,setTablesCoords:k,nextTicketName:j,incrementNextTicketName:function(){_(j+1)},restaurantName:w,setRestaurantName:C,getRestaurantName:function(){d("/api/restaurants",function(e,t){return C(t.results)})}};return r.a.createElement(s.Provider,{value:S},e.children)};var p=function(e){var t=Object(n.useContext)(s);return Object(n.useEffect)(function(){t.getProducts()},[]),r.a.createElement("div",{className:"productlist-container"},t.products?t.products.results.map(function(t){return e.isOrderView?r.a.createElement("div",{className:"product-card"},r.a.createElement("div",{className:t.product_id,onClick:e.addProductOnClick}," ",r.a.createElement("h3",{className:t.product_id},t.product_name)," ",r.a.createElement("p",{className:t.product_id},t.product_price))):r.a.createElement("div",{className:"product-card"},r.a.createElement("div",null,r.a.createElement("h3",null,t.product_name),r.a.createElement("p",null,t.product_price)))}):null)};var f=function(e){return r.a.createElement("form",{id:"login-form",onSubmit:function(t){t.preventDefault();var a=new URLSearchParams;console.log(t.target);var n=!0,r=!1,c=void 0;try{for(var l,o=new FormData(t.target)[Symbol.iterator]();!(n=(l=o.next()).done);n=!0){var u=l.value;console.log(u[0],u[1]),a.append(u[0],u[1])}}catch(i){r=!0,c=i}finally{try{n||null==o.return||o.return()}finally{if(r)throw c}}console.log("submitting form"),console.log(a),fetch("http://localhost:8000"+e.apiPath,{method:"POST",credentials:"include",body:a}).then(function(e){return e.json()}).then(function(t){e.afterPost&&e.afterPost(t),console.log(t)})}},e.inputs.map(function(e){return r.a.createElement("input",{type:e.type,name:e.name,placeholder:e.placeholder})}),r.a.createElement("input",{type:"submit"}))};var b=function(){var e=Object(n.useContext)(s);return Object(n.useEffect)(function(){e.getProducts()},[]),r.a.createElement("div",null,r.a.createElement(p,{isOrderView:!1}),r.a.createElement(f,{apiPath:"/api/products",inputs:[{type:"text",name:"product_name",placeholder:"Product Name"},{type:"text",name:"product_price",placeholder:"Product Price"}],afterPost:function(){e.getProducts()}}))};var h=function(){return r.a.createElement("div",null,r.a.createElement(f,{apiPath:"/api/restaurants",inputs:[{type:"text",name:"restaurant_name",placeholder:"Restaurant Name"},{type:"text",name:"username",placeholder:"Username"},{type:"password",name:"password",placeholder:"Password"}]}))};var E=function(){var e=Object(n.useContext)(s);return Object(n.useEffect)(function(){e.getTickets()},[]),r.a.createElement("div",{className:"ticket-parent"},e.tickets?e.tickets.results.map(function(e){var t="/ticket/"+e.ticket_id;return r.a.createElement(o.b,{to:t,className:"ticket-links"},r.a.createElement("div",{className:"allTickets-ids"},e.ticket_id))}):null)},v=r.a.createContext({});var g=function(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(null),u=Object(i.a)(o,2),s=u[0],d=u[1],m=Object(n.useState)(null),p=Object(i.a)(m,2),f=p[0],b=p[1],h=function(){var e=document.cookie.split(";").reduce(function(e,t){var a=t.split("=");return 2===a.length&&(e[a[0].trim()]=a[1].trim()),e},{});return console.log(e),e},E={loggedIn:c,user_id:s,role:f,afterLogin:function(){l(!0),d(h().user_id),b(h().role)},checkLogin:function(){h().user_id?l(!0):l(!1),b(h().role),d(h().user_id)},logout:function(){l(!1),d(null),b(null),document.cookie="user_id=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",document.cookie="role=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"}};return r.a.createElement(v.Provider,{value:E},e.children)},y=function(e){var t=e.location.pathname.split("/"),a=t[t.length-1],c=Object(n.useState)(null),l=Object(i.a)(c,2),o=l[0],u=l[1];return Object(n.useEffect)(function(){d("/api/tickets/".concat(a),function(e,t){return u(t.results)})},[]),r.a.createElement("div",null,o?r.a.createElement("table",{className:"ticket-table"},r.a.createElement("tr",{className:"ticket-tr"},r.a.createElement("th",null,"Product"),r.a.createElement("th",null,"Price"),r.a.createElement("th",null,"Quantity")),r.a.createElement("tbody",null,o.map(function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,e.product_name),r.a.createElement("td",null,e.product_price),r.a.createElement("td",null,e.quantity))}))):r.a.createElement("p",null,"Loading..."))},k=a(10),N=function(e){return r.a.createElement("div",{className:"items-in-ticket"},r.a.createElement("input",{style:{display:"none"},className:"product_id",value:e.itemId}),r.a.createElement("p",null,e.product.product_name),r.a.createElement("p",null,e.product.product_price),r.a.createElement("input",{required:!0,className:"quantity",type:"number",min:0,defaultValue:1}))};var O=function(e){var t=Object(n.useContext)(s);return r.a.createElement("div",{className:"orderForm-parent",id:"order-form-div"},r.a.createElement("form",{id:"order-form",onSubmit:function(e){e.preventDefault();var a=new URLSearchParams;a.append("table_id",document.querySelector("#table_id").value),console.log(a),fetch("http://localhost:8000/api/tickets/",{method:"POST",credentials:"include",body:a}).then(function(e){return e.json()}).then(function(e){var a=e.ticket_id,n=new URLSearchParams,r=Array.from(document.querySelector("#productsInOrder").children).reduce(function(e,t){return e.push({product_id:t.querySelector(".product_id").value,quantity:t.querySelector(".quantity").value}),e},[]);n.append("products",JSON.stringify(r)),console.log("submitting form for ticket nr",a),fetch("http://localhost:8000"+"/api/tickets/".concat(a),{method:"POST",credentials:"include",body:n}).then(function(e){return e.json()}).then(function(e){t.setProductInTicket([]),console.log(e)})})}},r.a.createElement("div",{className:"table-num-holder"},r.a.createElement("h3",{className:"table-number-title"},"Table #"),r.a.createElement("input",{id:"table_id",type:"number",defaultValue:1,name:"table_id"})),r.a.createElement("div",{className:"orderForm-items",id:"productsInOrder"},t.productsInTicket.map(function(e){console.log(e);var a=t.products.results.find(function(t){return t.product_id==e});return console.log(a),r.a.createElement(N,{product:a,itemId:e})})),r.a.createElement("div",{className:"send-order-btn-holder"},r.a.createElement("input",{type:"submit",value:"Send Order",className:"send-order-btn"}))))};var j=function(){var e=Object(n.useContext)(s);return Object(n.useEffect)(function(){e.getProducts()},[]),r.a.createElement("div",null,r.a.createElement(p,{addProductOnClick:function(t){console.log(t.target),e.setProductInTicket([].concat(Object(k.a)(e.productsInTicket),[t.target.className]))},isOrderView:!0}),r.a.createElement(O,null))},_=a(22),P=a(20);var x=function(e){var t=Object(n.useContext)(s),a=t.tablesCoords.find(function(t){return t.table_id==e.table_id});return r.a.createElement(P.a,{onDragStop:function(a,n){var r=t.tablesCoords.map(function(t){return t.table_id==e.table_id&&(t.x=n.x,t.y=n.y),t});t.setTablesCoords(r)},default:{x:t.tablesCoords.find(function(t){return t.table_id==e.table_id}).x,y:t.tablesCoords.find(function(t){return t.table_id==e.table_id}).y,width:100,height:100},minWidth:100,minHeight:100,bounds:"parent",enableResizing:!1,dragGrid:[10,10]},r.a.createElement("div",{className:"box layout-bord",style:{}},a.table_name))};var w=function(){var e=Object(n.useContext)(s);return Object(n.useEffect)(function(){fetch("http://localhost:8000/api/bord",{method:"GET",credentials:"include"}).then(function(e){return e.json()}).then(function(t){e.setTablesCoords(t.results.map(function(e){return console.log(e),Object(_.a)({},e)}))})},[]),r.a.createElement("div",{className:"layout-parent"},r.a.createElement("div",{className:"btn-container"},r.a.createElement("button",{className:"layout-btn",onClick:function(t){var a=new URLSearchParams;a.append("table_name",JSON.stringify(e.nextTicketName)),fetch("http://localhost:8000/api/bord",{method:"POST",credentials:"include",body:a}).then(function(e){return e.json()}).then(function(t){e.setTablesCoords([].concat(Object(k.a)(e.tablesCoords),[{table_id:t.table_id,x:t.x,y:t.y,table_name:e.nextTicketName}])),e.incrementNextTicketName()})}},"Add Table"),r.a.createElement("button",{className:"layout-btn",onClick:function(t){var a=new URLSearchParams;a.append("bords",JSON.stringify(e.tablesCoords)),fetch("http://localhost:8000/api/bord",{method:"PUT",credentials:"include",body:a}).then(function(e){return e.json()}).then(function(e){})}},"Save Layout")),r.a.createElement("div",{className:"layout-container",id:"layoutContainer"},e.tablesCoords.map(function(e){return r.a.createElement(x,{key:e.table_id,table_id:e.table_id})})))};var C=function(e){var t=Object(n.useContext)(v),a=Object(n.useContext)(s);return r.a.createElement("div",null,r.a.createElement(f,{apiPath:"/api/login",inputs:[{type:"text",name:"username",placeholder:"Username"},{type:"password",name:"password",placeholder:"Password"}],afterPost:function(){t.afterLogin(),e.history.push("/restaurantlayout"),a.getRestaurantName()}}),r.a.createElement("button",null,r.a.createElement(o.b,{to:"/signup"},"Signup")))};var S=function(){return r.a.createElement("div",null,r.a.createElement(f,{apiPath:"/api/users",inputs:[{type:"text",name:"username",placeholder:"Username"},{type:"password",name:"password",placeholder:"Password"},{type:"text",name:"role",placeholder:"Role"}]}))};var T=function(){var e=Object(n.useContext)(v),t=Object(n.useContext)(s);return Object(n.useEffect)(function(){e.checkLogin(),t.getRestaurantName()},[]),r.a.createElement("div",{className:"App"},r.a.createElement(o.a,null,r.a.createElement("div",{className:"nav-container"},e.loggedIn?r.a.createElement("ul",{className:"nav"},r.a.createElement("li",{className:"nav-links"},r.a.createElement(o.b,{to:"/"},t.restaurantName?t.restaurantName:"")),r.a.createElement("li",{className:"nav-links"},r.a.createElement(o.b,{to:"/products"},"Products")),r.a.createElement("li",{className:"nav-links"},r.a.createElement(o.b,{to:"/all-tickets"},"All Tickets")),r.a.createElement("li",{className:"nav-links"},r.a.createElement(o.b,{to:"/order"},"New Order")),r.a.createElement("li",{className:"nav-links"},r.a.createElement(o.b,{to:"/restaurantlayout"},"Restaurant Overview")),r.a.createElement("li",{className:"nav-links"},r.a.createElement(o.b,{to:"/employees"},"Employees")),r.a.createElement("li",null,r.a.createElement("button",{onClick:e.logout},"Logout"))):r.a.createElement("ul",{className:"nav"},r.a.createElement("li",{className:"nav-links"},r.a.createElement(o.b,{to:"/login"},"Login")))),e.loggedIn?r.a.createElement(u.c,null,r.a.createElement(u.a,{path:"/employees",component:S}),r.a.createElement(u.a,{path:"/products",component:b}),r.a.createElement(u.a,{path:"/all-tickets",component:E}),r.a.createElement(u.a,{path:"/ticket/:id",component:y}),r.a.createElement(u.a,{path:"/order",component:j}),r.a.createElement(u.a,{path:"/restaurantlayout",component:w})):r.a.createElement(u.c,null,r.a.createElement(u.a,{path:"/login",component:C}),r.a.createElement(u.a,{path:"/signup",component:h}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(g,null,r.a.createElement(m,null,r.a.createElement(T,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[23,1,2]]]);
//# sourceMappingURL=main.a95aec83.chunk.js.map